## 关系代数

## SQL

1. ```sql
   create table course_count
   (
       cc_sid   varchar(20) not null
           primary key,
       cc_sname varchar(20) not null,
       cc_count int         null
   );
   ```

   ```sql
   insert into course_count
   select s_id, s_name, count(sc_cid)
   from student left join stu_course sc on student.s_id = sc.sc_sid
   group by s_id
   ```

2. ```sql
   select s_name
   from student
   where s_name like '诸%' and s_name not like '诸葛%'
   ```

3. ```sql
   select s_id, s_name from student
   where s_id in (
       select sc_sid from stu_course
       where sc_score in (
           select max(sc_score)
           from stu_course
           group by sc_cid
       )
   )
   ```

4. ```sql
   select sc_sid, sc_cid, min(sc_time)
   from stu_course
   group by sc_sid, sc_cid
   ```

5. ```sql
   update stu_course scr
   set scr.sc_score=60
   where (scr.sc_sid, scr.sc_cid, scr.sc_time) not in (
       select sc.sc_sid, sc.sc_cid, min(sc.sc_time)
       from (select * from stu_course) sc
       group by sc.sc_sid, sc.sc_cid
   )
   ```

6. ```sql
   select s_id, c_id
   from student cross join course
   where (s_id, c_pre) in (
       select sc_sid, sc_cid
       from stu_course
   ) and (s_id, c_id) not in (
       select sc_sid, sc_cid
       from stu_course
   )
   order by s_id, c_id
   ```

   

